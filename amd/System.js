!function(){var e=function(){var e;!function(e){"use strict";var t=function(){function e(){}return e.prototype.Identity=function(e){return e},e.prototype.True=function(){return!0},e.prototype.False=function(){return!1},e.prototype.Blank=function(){},Object.defineProperty(e,"Identity",{get:function(){return n.Identity},enumerable:!0,configurable:!0}),Object.defineProperty(e,"True",{get:function(){return n.True},enumerable:!0,configurable:!0}),Object.defineProperty(e,"False",{get:function(){return n.False},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Blank",{get:function(){return n.Blank},enumerable:!0,configurable:!0}),e}();e.Functions=t;var n=new t}(e||(e={}));var e;!function(e){"use strict";var t;!function(t){function n(e){return typeof e===t.Boolean}function r(e){return typeof e===t.Number}function o(e){return typeof e===t.String}function i(e){return typeof e===t.Function}t.Boolean=typeof!0,t.Number="number",t.String="string",t.Object=typeof{},t.Null="object",t.Undefined="undefined",t.Function=typeof e.Functions.Blank,t.isBoolean=n,t.isNumber=r,t.isString=o,t.isFunction=i}(t=e.Types||(e.Types={})),Object.freeze(e.Types)}(e||(e={}));var e;!function(e){function t(e){return typeof e===a.Number&&isNaN(e)}function n(e,n,r){return void 0===r&&(r=!0),e===n||!r&&e==n||t(e)&&t(n)}function r(e,t,r){return void 0===r&&(r=!0),n(e,t,r)?0:e>t?1:t>e?-1:0/0}function o(e,t){if(void 0===t&&(t=0),0>t)return e;switch(typeof e){case a.Undefined:case a.Null:case a.String:case a.Boolean:case a.Number:case a.Function:return e}var n;if(e instanceof Array){if(n=e.slice(),t>0)for(var r=0;r<n.length;r++)r in n&&(n[r]=o(n[r],t-1))}else if(n={},t>0)for(var i in e)n[i]=o(e[i],t-1);return n}function i(e,t){for(var n in e)t[n]=e[n]}function u(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(n){e.prototype[n]=t.prototype[n]})})}var a=e.Types;e.isEqualToNaN=t,e.areEqual=n,e.compare=r,e.clone=o,e.copyTo=i,e.applyMixins=u}(e||(e={}));var e;!function(e){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];o(e,!1)}function n(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];o(e,!0)}function r(t,n){if(t&&typeof t.dispose==e.Types.Function)if(n)try{t.dispose()}catch(r){}else t.dispose()}function o(e,t){for(var n;e.length&&!(n=e.shift()););if(n)try{r(n,t)}finally{o(e,t)}}function i(e,t){e&&e.length&&o(e.slice(0),t)}function u(e,n){try{return n(e)}finally{t(e)}}e.dispose=t,e.disposeWithoutException=n,e.disposeThese=i,e.using=u;var a=function(){function e(e){this._finalizer=e,this._wasDisposed=!1}return Object.defineProperty(e.prototype,"wasDisposed",{get:function(){return this._wasDisposed},enumerable:!0,configurable:!0}),e.assertIsNotDisposed=function(e,t){if(void 0===t&&(t="ObjectDisposedException"),e)throw new Error(t);return!0},e.prototype.assertIsNotDisposed=function(t){return void 0===t&&(t="ObjectDisposedException"),e.assertIsNotDisposed(this._wasDisposed,t)},e.prototype.dispose=function(){var e=this;if(!e._wasDisposed){e._wasDisposed=!0;try{e._onDispose()}finally{e._finalizer&&e._finalizer()}}},e.prototype._onDispose=function(){},e}();e.DisposableBase=a}(e||(e={}));var e;!function(e){var t;!function(t){var n;!function(t){function n(e){var t;return e>65536?t=new Array(e):(t=[],t.length=e),t}function r(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=1/0),!e)return e;var r=e.length;return t||r>n?e.slice(t,Math.min(n,r)-r):e.slice(0)}function o(e,t,n,r,o){if(void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=1/0),!e)throw new Error("ArgumentNullException: source array cannot be null.");if(!t)throw new Error("ArgumentNullException: destination array cannot be null.");if(0>n)throw new Error("ArgumentOutOfRangeException: source index cannot be less than zero.");var i=e.length;if(n>=i)throw new Error("ArgumentOutOfRangeException: the source index must be less than the length of the source array.");if(t.length<0)throw new Error("ArgumentOutOfRangeException: destination index cannot be less than zero.");var u=e.length-n;if(isFinite(o)&&o>u)throw new Error("ArgumentOutOfRangeException: source index + length cannot exceed the length of the source array.");o=Math.min(o,u);for(var a=0;o>a;++a)t[r+a]=e[n+a]}function i(e,t){return e?-1!=e.indexOf(t):!1}function u(e,t,n,r){var o=0;if(0!==r){r||(r=1/0);for(var i=e.length-1|0;i>=0&&(e[i]!==t||(e[i]=n,++o,--r));--i);}return o}function a(e,t,n,r){for(var o=n+r,i=n;o>i;++i)e[i]=t}function s(e,t,n){a(e,null,t,n)}function c(e,t){if(!e)throw new Error("ArgumentNullException: 'array' cannot be null.");var n=e.length,r=!n||!i(e,t);return r&&(e[n]=t),r}function l(t,n){if(!t)throw new Error("ArgumentNullException: 'array' cannot be null.");if(!e.Types.isFunction(n))throw new Error("InvalidArgumentException: 'predicate' must be a function.");for(var r=0|t.length,o=0;r>o;++o)if(o in t&&n(t[o]))return o;return-1}function p(e,t){if(!e)throw new Error("ArgumentNullException: 'arrays' cannot be null.");if(e.length<2)throw new Error("Cannot compare a set of arrays less than 2.");for(var n=e[0],r=0,o=0|e.length;o>r;++r)if(!f(n,e[r],t))return!1;return!0}function f(t,n,r,o){if(void 0===o&&(o=e.areEqual),t===n)return!0;var i=0|t.length;if(i!=(0|n.length))return!1;for(var u=0;i>u;++u)if(!o(t[u],n[u],r))return!1;return!0}function d(e,t){e.every(function(e,n){return t(e,n)!==!1})}function y(e,t){if(!e)throw new Error("ArgumentNullException: 'target' cannot be null.");if(t)for(var n=0;n<e.length;++n)e[n]=t(e[n]);return e}function h(e,t){if(!e)throw new Error("ArgumentNullException: 'array' cannot be null.");var n=t<e.length;return n&&e.splice(t,1),n}function v(e,t,n){if(!e)throw new Error("ArgumentNullException: 'array' cannot be null.");var r=0;if(e&&e.length&&0!==n){n||(n=1/0);for(var o=e.length-1|0;o>=0&&(e[o]!==t||(e.splice(o,1),++r,--n));--o);}return r}function m(e,t){for(var n=[];t--;)n.push(e);return n}function g(e,t){if(void 0===t&&(t=!1),!e||!e.length)return 0;var n=0;return t?e.forEach(function(e){isNaN(e)||(n+=e)}):e.every(function(e){return n+=e,!isNaN(n)}),n}function _(e,t){if(void 0===t&&(t=!1),!e||!e.length)return 0/0;var n,r=0;return t?(n=0,e.forEach(function(e){isNaN(e)||(r+=e,n++)})):(n=e.length,e.every(function(e){return r+=e,!isNaN(r)})),!n||isNaN(r)?0/0:r/n}function b(e,t){if(void 0===t&&(t=!1),!e||!e.length)return 0/0;var n=1;if(t){var r=!1;e.forEach(function(e){isNaN(e)||(n*=e,r||(r=!0))}),r||(n=0/0)}else e.every(function(e){return isNaN(e)?(n=0/0,!1):(n*=e,!0)});return n}function E(e,t,n,r){if(!e||!e.length)return 0/0;var o=t;if(n){var i=!1;e.forEach(function(e){isNaN(e)||(r(e,o)&&(o=e),i||(i=!0))}),i||(o=0/0)}else e.every(function(e){return isNaN(e)?(o=0/0,!1):(r(e,o)&&(o=e),!0)});return o}function w(e,t){return void 0===t&&(t=!1),E(e,+1/0,t,function(e,t){return t>e})}function x(e,t){return void 0===t&&(t=!1),E(e,-1/0,t,function(e,t){return e>t})}t.initialize=n,t.copy=r,t.copyTo=o,t.contains=i,t.replace=u,t.updateRange=a,t.clear=s,t.register=c,t.findIndex=l,t.areAllEqual=p,t.areEqual=f,t.forEach=d,t.applyTo=y,t.removeIndex=h,t.remove=v,t.repeat=m,t.sum=g,t.average=_,t.product=b,t.min=w,t.max=x}(n=t.ArrayUtility||(t.ArrayUtility={}))}(t=e.Collections||(e.Collections={}))}(e||(e={}));var e,t=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n};!function(e){var n=e.Collections.ArrayUtility,r=function(e){function n(t,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=0),e.call(this),this.type=t,this.listener=n,this.useCapture=r,this.priority=o}return t(n,e),n.prototype.dispose=function(){this.listener=null},Object.defineProperty(n.prototype,"wasDisposed",{get:function(){return null==this.listener},enumerable:!0,configurable:!0}),n.prototype.matches=function(e,t,n){void 0===n&&(n=!1);var r=this;return r.type==e&&r.listener==t&&r.useCapture==n},n.prototype.equals=function(e){var t=this;return t.type==e.type&&t.listener==e.listener&&t.useCapture==e.useCapture&&t.priority==e.priority},n}(e.DisposableBase),o=function(o){function i(){o.apply(this,arguments),this._isDisposing=!1}return t(i,o),i.prototype.addEventListener=function(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o=0);var i=this._listeners;i||(this._listeners=i=[]),i.push(new r(e,t,n,o))},i.prototype.registerEventListener=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=0),this.hasEventListener(e,t,n)||this.addEventListener(e,t,n,r)},i.prototype.hasEventListener=function(e,t,n){void 0===n&&(n=!1);var r=this._listeners;return r&&r.some(function(r){return e==r.type&&(!t||t==r.listener&&n==r.useCapture)})},i.prototype.removeEventListener=function(e,t,r){void 0===r&&(r=!1);var o=this._listeners;if(o){var i=n.findIndex(o,function(n){return n.matches(e,t,r)});if(-1!=i){var u=o[i];o.splice(i,1),u.dispose()}}},i.prototype.dispatchEvent=function(t,n){var r=this,o=this,i=o._listeners;if(!i||!i.length)return!1;var u;"string"==typeof t?(u=new Event,n||(n={}),u.cancelable=!!n.cancelable,u.target=o,u.type=t):u=t;var a=u.type,s=[];return i.forEach(function(e){e.type==a&&s.push(e)}),s.length?(s.sort(function(e,t){return t.priority-e.priority}),s.forEach(function(t){var n=new Event;e.copyTo(u,n),n.target=r,t.listener(n)}),!0):!1},Object.defineProperty(i,"DISPOSING",{get:function(){return"disposing"},enumerable:!0,configurable:!0}),Object.defineProperty(i,"DISPOSED",{get:function(){return"disposed"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDisposing",{get:function(){return this._isDisposing},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){var e=this;if(!e.wasDisposed&&!e._isDisposing){e._isDisposing=!0,e.dispatchEvent(i.DISPOSING),o.prototype.dispose.call(this),e.dispatchEvent(i.DISPOSED);var t=e._listeners;t&&(this._listeners=null,t.forEach(function(e){return e.dispose()}))}},i}(e.DisposableBase);e.EventDispatcher=o}(e||(e={}));{var e;e.DisposableBase}!function(e){var n=function(e){function n(t){e.call(this),this._closure=t}return t(n,e),Object.defineProperty(n.prototype,"isValueCreated",{get:function(){return this._isValueCreated},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canReset",{get:function(){return!this.wasDisposed&&!!this._closure},enumerable:!0,configurable:!0}),n.prototype.reset=function(e){var t=this;if(e&&t.assertIsNotDisposed(),t._closure)return t._isValueCreated=!1,t._value=null,!0;if(e)throw new Error("Cannot reset.  This Lazy has already de-referenced its closure.");return!1},Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),n.prototype.getValue=function(e){var t=this;t.assertIsNotDisposed();try{if(!t._isValueCreated&&t._closure){var n=t._closure();return t._value=n,t._isValueCreated=!0,n}}finally{e&&(t._closure=null)}return t._value},n.prototype._onDispose=function(){this._closure=null,this._value=null},n.prototype.equals=function(e){return this==e},n.prototype.valueEquals=function(e){return this.equals(e)||this.value===e.value},n}(e.DisposableBase);e.Lazy=n}(e||(e={}));var e;!function(e){"use strict";function t(e,t){return 1!==Math.abs(e)&&(t+="s"),t}function n(e){if(isNaN(e)||e>l.Days||e<l.Ticks||Math.floor(e)!==e)throw new Error("Invalid TimeUnit.");return!0}function r(e){if(!(e instanceof f||e instanceof y))throw new Error("Invalid comparison type.  Must be of type TimeUnitValue or TimeSpan.")}function o(e){if(e instanceof f){var t=e;return t.type===l.Milliseconds?t.value:t.toTimeSpan().milliseconds}return e instanceof y?e._milliseconds:void 0}var i=1e4,u=1e3,a=60,s=60,c=24;!function(e){e[e.Ticks=0]="Ticks",e[e.Milliseconds=1]="Milliseconds",e[e.Seconds=2]="Seconds",e[e.Minutes=3]="Minutes",e[e.Hours=4]="Hours",e[e.Days=5]="Days"}(e.TimeUnit||(e.TimeUnit={}));var l=e.TimeUnit;Object.freeze(l);var p=function(){function n(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this._totalMilliseconds=e.length>1?y.millisecondsFromTime(e[0]||0,e[1]||0,e.length>2&&e[2]||0,e.length>3&&e[3]||0):e.length>0&&e[0]||0}return Object.defineProperty(n.prototype,"totalMilliseconds",{get:function(){return this._totalMilliseconds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"direction",{get:function(){return e.compare(this._totalMilliseconds,0)},enumerable:!0,configurable:!0}),n.prototype.equals=function(t){return e.areEqual(this._totalMilliseconds,t.totalMilliseconds)},n.prototype.compareTo=function(t){return null==t?1:e.compare(this._totalMilliseconds,t.totalMilliseconds)},Object.defineProperty(n.prototype,"ticks",{get:function(){var e=this,t=e._ticks;if(void 0===t){var n=Math.abs(e._totalMilliseconds);e._ticks=t=(n-Math.floor(n))*i}return t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"milliseconds",{get:function(){var e=this,t=e._ms;return void 0===t&&(e._ms=t=this._totalMilliseconds%u|0),t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"seconds",{get:function(){var e=this,t=e._seconds;return void 0===t&&(e._seconds=t=this._totalMilliseconds/u%a|0),t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minutes",{get:function(){var e=this,t=e._minutes;return void 0===t&&(e._minutes=t=this._totalMilliseconds/u/a%s|0),t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hours",{get:function(){var e=this,t=e._hours;return void 0===t&&(e._hours=t=this._totalMilliseconds/u/a/s%c|0),t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"days",{get:function(){var e=this,t=e._days;return void 0===t&&(e._days=t=this._totalMilliseconds/u/a/s/c|0),t},enumerable:!0,configurable:!0}),n.prototype.toTimeSpan=function(){return new y(this._totalMilliseconds)},n.from=function(e,t,r,o){return void 0===r&&(r=0),void 0===o&&(o=0),new n(e,t,r,o)},n.prototype.toString=function(){var e=this,n=[];return e.days&&n.push(t(e.days,"day")),e.hours&&n.push(t(e.hours,"hour")),e.minutes&&n.push(t(e.minutes,"minute")),e.seconds&&n.push(t(e.seconds,"second")),n.length>1&&n.splice(n.length-1,0,"and"),n.join(", ").replace(", and, "," and ")},n}();e.ClockTime=p;var f=function(){function t(e,t){this.value=e,this._type=t,n(t)}return t.prototype.coerce=function(e){var r=this._type;if(n(r),e instanceof y)e=e.toTimeUnitValue(r);else{if(!(e instanceof t))return null;r!==e.type&&(e=e.to(r))}return e},t.prototype.equals=function(t){var n=this.coerce(t);return null==n?!1:e.areEqual(this.value,n.value)},t.prototype.compareTo=function(t){return null==t?1:(r(t),e.compare(this.value,this.coerce(t).value))},Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),t.prototype.toTimeSpan=function(){return new y(this.value,this.type)},t.prototype.to=function(e){return void 0===e&&(e=this.type),this.toTimeSpan().toTimeUnitValue(e)},t}();e.TimeUnitValue=f;var d,y=function(){function t(e,n){void 0===n&&(n=l.Milliseconds),this._milliseconds=t.convertToMilliseconds(e,n)}return t.prototype.equals=function(t){var n=o(t);return void 0===t?!1:e.areEqual(this._milliseconds,n)},t.prototype.compareTo=function(t){return null==t?1:(r(t),e.compare(this._milliseconds,o(t)))},t.prototype.toTimeUnitValue=function(e){return void 0===e&&(e=l.Milliseconds),new f(this.total(e),e)},t.convertToMilliseconds=function(e,t){switch(void 0===t&&(t=l.Milliseconds),t){case l.Days:e*=c;case l.Hours:e*=s;case l.Minutes:e*=a;case l.Seconds:e*=u;case l.Milliseconds:return e;case l.Ticks:return e/i;default:throw new Error("Invalid TimeUnit.")}},t.prototype.total=function(e){var t=this;switch(e){case l.Days:return t.days;case l.Hours:return t.hours;case l.Minutes:return t.minutes;case l.Seconds:return t.seconds;case l.Milliseconds:return t._milliseconds;case l.Ticks:return t._milliseconds*i;default:throw new Error("Invalid TimeUnit.")}},Object.defineProperty(t.prototype,"ticks",{get:function(){return this._milliseconds*i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"milliseconds",{get:function(){return this._milliseconds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seconds",{get:function(){return this._milliseconds/u},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minutes",{get:function(){return this.seconds/a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hours",{get:function(){return this.minutes/s},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"days",{get:function(){return this.hours/c},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return new p(this._milliseconds)},enumerable:!0,configurable:!0}),t.prototype.add=function(n){if(e.Types.isNumber(n))throw new Error("Use .addUnit to add a numerical value amount.  .add only supports ClockTime, TimeSpan, and TimeUnitValue.");return(n instanceof f||n instanceof p)&&(n=n.toTimeSpan()),new t(this._milliseconds+n.milliseconds)},t.prototype.addUnit=function(e,n){return void 0===n&&(n=l.Milliseconds),new t(this._milliseconds+t.convertToMilliseconds(e,n))},t.from=function(e,n){return new t(e,n)},t.fromDays=function(e){return new t(e,l.Days)},t.fromHours=function(e){return new t(e,l.Hours)},t.fromMinutes=function(e){return new t(e,l.Minutes)},t.fromSeconds=function(e){return new t(e,l.Seconds)},t.fromMilliseconds=function(e){return new t(e,l.Milliseconds)},t.fromTicks=function(e){return new t(e,l.Ticks)},t.fromTime=function(e,n,r,o){return void 0===r&&(r=0),void 0===o&&(o=0),new t(t.millisecondsFromTime(e,n,r,o))},t.millisecondsFromTime=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var o=e;return o*=s,o+=t,o*=a,o+=n,o*=u,o+=r},t.between=function(e,n){return new t(n.getTime()-e.getTime())},Object.defineProperty(t,"zero",{get:function(){return d||(d=new t(0))},enumerable:!0,configurable:!0}),t}();e.TimeSpan=y}(e||(e={}));var e;!function(e){var t=e.Collections.LinkedList,n=function(){function e(e,t){if(this._observable=e,this.observer=t,!e||!t)throw"Observable and observer cannot be null."}return Object.defineProperty(e.prototype,"wasDisposed",{get:function(){return!this._observable||!this.observer},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this.observer,t=this._observable;e&&t&&(this.observer=null,this._observable=null,t.unsubscribe(e))},e}(),r=function(){function e(){this._subcribers=new t}return e.prototype._findEntryNode=function(e){for(var t=this._subcribers.first;t&&t.value.observer!=e;)t=t.next;return t},e.prototype.subscribe=function(e){var t=this._findEntryNode(e);if(t)return t.value;var r=new n(this,e);return this._subcribers.add(r),r},e.prototype.unsubscribe=function(e){var t=this._findEntryNode(e);if(t){var n=t.value;t.remove(),n.dispose()}},e.prototype.onNext=function(e){this._subcribers.forEachFromClone(function(t){return t.observer.onNext(e)})},e.prototype.onError=function(e){this._subcribers.forEachFromClone(function(t){return t.observer.onError(e)})},e.prototype.onCompleted=function(){var e=this._subcribers.toArray();this._subcribers.clear(),e.forEach(function(e){var t=e.observer;e.dispose(),t.onCompleted()}),e.length=0},e}();e.ObservableNode=r}(e||(e={}));var e;!function(e){var t;!function(t){var n=function(){function t(){this.reset()}return t.getTimestampMilliseconds=function(){return(new Date).getTime()},Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),t.startNew=function(){var e=new t;return e.start(),e},t.measure=function(n){var r=t.getTimestampMilliseconds();return n(),new e.TimeSpan(t.getTimestampMilliseconds()-r)},t.prototype.record=function(e){var n=t.measure(e);return this._elapsed+=n.milliseconds,n},t.prototype.start=function(){var e=this;e._isRunning||(e._startTimeStamp=t.getTimestampMilliseconds(),e._isRunning=!0)},t.prototype.stop=function(){var e=this;e._isRunning&&(e._elapsed+=e.currentLapMilliseconds,e._isRunning=!1)},t.prototype.reset=function(){var e=this;e._elapsed=0,e._isRunning=!1,e._startTimeStamp=0/0},t.prototype.lap=function(){var n=this;if(n._isRunning){var r=t.getTimestampMilliseconds(),o=n._startTimeStamp,i=r-o;return n._startTimeStamp=r,n._elapsed+=i,new e.TimeSpan(i)}return e.TimeSpan.zero},Object.defineProperty(t.prototype,"currentLapMilliseconds",{get:function(){return this._isRunning?t.getTimestampMilliseconds()-this._startTimeStamp:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLap",{get:function(){return this._isRunning?new e.TimeSpan(this.currentLapMilliseconds):e.TimeSpan.zero},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elapsedMilliseconds",{get:function(){var e=this,t=e._elapsed;return e._isRunning&&(t+=e.currentLapMilliseconds),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elapsed",{get:function(){return new e.TimeSpan(this.elapsedMilliseconds)},enumerable:!0,configurable:!0}),t}();t.Stopwatch=n}(t=e.Diagnostics||(e.Diagnostics={}))}(e||(e={}));var e;!function(e){var t;!function(t){"use strict";function n(e,t){throw void 0===t&&(t=""),console.log("DictionaryAbstractBase sub-class has not overridden "+e+". "+t),new Error("DictionaryAbstractBase."+e+": Not implemented.")}var r=function(){function r(){this._updateRecursion=0}return Object.defineProperty(r.prototype,"isUpdating",{get:function(){return 0!=this._updateRecursion},enumerable:!0,configurable:!0}),r.prototype._onValueUpdate=function(t,n,r){if(!e.areEqual(n,r,!0)){var o=this;o.onValueChanged&&o.onValueChanged(t,n,r),0==o._updateRecursion&&o._onUpdated()}},r.prototype._onUpdated=function(){var e=this;e.onUpdated&&e.onUpdated()},r.prototype.handleUpdate=function(e){var t,n=this;if(e){n._updateRecursion++;try{t=e()}finally{n._updateRecursion--}}else t=0==n._updateRecursion;return t&&0==n._updateRecursion&&n._onUpdated(),t},Object.defineProperty(r.prototype,"isReadOnly",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"count",{get:function(){return n("count")},enumerable:!0,configurable:!0}),r.prototype.add=function(e){this.addByKeyValue(e.key,e.value)},r.prototype.clear=function(){var e=this,t=e.keys,n=t.length;return n&&e.handleUpdate(function(){return t.forEach(function(t){e.removeByKey(t)}),!0}),0!=e.count&&console.warn("Dictioary clear() results in mismatched count."),n},r.prototype.contains=function(t){var n=this.get(t.key);return e.areEqual(n,t.value)},r.prototype.copyTo=function(e,t){void 0===t&&(t=0);for(var n=this.getEnumerator();n.moveNext();)e[t++]=n.current},r.prototype.remove=function(t){var n=t.key,r=this.get(n);return e.areEqual(r,t.value)&&this.removeByKey(n)?1:0},Object.defineProperty(r.prototype,"keys",{get:function(){return n("keys")},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"values",{get:function(){return n("values")},enumerable:!0,configurable:!0}),r.prototype.addByKeyValue=function(e,t){var n=this;if(n.containsKey(e))throw new Error("Adding key/value when one already exists.");n.set(e,t)},r.prototype.get=function(e){return n("get(key: TKey): TValue","When calling for key: "+e)},r.prototype.set=function(e,t){return n("set(key: TKey, value: TValue): boolean","When setting "+e+":"+t+".")},r.prototype.containsKey=function(e){var t=this.get(e);return void 0!==t},r.prototype.containsValue=function(t){for(var n=this.getEnumerator(),r=e.areEqual;n.moveNext();)if(r(n.current,t,!0))return n.dispose(),!0;return!1},r.prototype.removeByKey=function(e){return this.set(e,void 0)},r.prototype.removeByValue=function(t){var n=this,r=0,o=e.areEqual;return n.keys.forEach(function(e){o(n.get(e),t,!0)&&(n.removeByKey(e),++r)}),r},r.prototype.importPairs=function(e){var t=this;return t.handleUpdate(function(){var n=!1;return e.forEach(function(e){t.set(e.key,e.value),n=!0}),n})},r.prototype.getEnumerator=function(){var e,n,r=this,o=0;return new t.EnumeratorBase(function(){e=r.keys,n=e.length},function(t){for(;n>o;){var i=e[o++],u=r.get(i);if(void 0!==u)return t.yieldReturn({key:i,value:u})}return t.yieldBreak()})},r}();t.DictionaryAbstractBase=r}(t=e.Collections||(e.Collections={}))}(e||(e={}));var e;!function(e){var n;!function(n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(t){return null===t?"null":void 0===t?"undefined":typeof t.toString===e.Types.Function?t.toString():Object.prototype.toString.call(t)}var i=function(){function e(e,t,n,r){this.key=e,this.value=t,this.prev=n,this.next=r}return e}(),u=function(){function e(e,t){this.first=e,this.last=t}return e.prototype.addLast=function(e){var t=this;null!=t.last?(t.last.next=e,e.prev=t.last,t.last=e):t.first=t.last=e},e.prototype.replace=function(e,t){var n=this;null!=e.prev?(e.prev.next=t,t.prev=e.prev):n.first=t,null!=e.next?(e.next.prev=t,t.next=e.next):n.last=t},e.prototype.remove=function(e){var t=this;null!=e.prev?e.prev.next=e.next:t.first=e.next,null!=e.next?e.next.prev=e.prev:t.last=e.prev},e.prototype.clear=function(){for(var e=this;e.last;)e.remove(e.last)},e.prototype.forEach=function(e){for(var t=this,n=t.first;n;)e(n),n=n.next},e}(),a=function(a){function s(t){void 0===t&&(t=e.Functions.Identity),a.call(this),this.compareSelector=t,this._count=0,this._entries=new u,this._buckets={}}return t(s,a),s.prototype.setKV=function(t,n,u){var a,s=this,c=s._buckets,l=s._entries,p=s.compareSelector,f=p(t),d=o(f);if(r(c,d)){for(var y=e.areEqual,h=c[d],v=0;v<h.length;v++){var m=h[v];if(p(m.key)===f){if(!u)throw new Error("Key already exists.");var g=!y(m.value,n);return g&&(void 0===n?(l.remove(m),h.splice(v,1),h.length||delete c[d],--s._count):(a=new i(t,n),l.replace(m,a),h[v]=a),s._onValueUpdate(t,n,m.value)),g}}h.push(a=a||new i(t,n))}else{if(void 0===n){if(u)return!1;throw new Error("Cannot add 'undefined' value.")}c[d]=[a=new i(t,n)]}return++s._count,l.addLast(a),s._onValueUpdate(t,n,void 0),!0},s.prototype.addByKeyValue=function(e,t){this.setKV(e,t,!1)},s.prototype.get=function(e){var t=this._buckets,n=this.compareSelector,i=n(e),u=o(i);if(!r(t,u))return void 0;for(var a=t[u],s=0,c=a.length;c>s;s++){var l=a[s];if(n(l.key)===i)return l.value}return void 0},s.prototype.set=function(e,t){return this.setKV(e,t,!0)},s.prototype.containsKey=function(e){var t=this,n=t._buckets,i=t.compareSelector,u=i(e),a=o(u);if(!r(n,a))return!1;for(var s=n[a],c=0,l=s.length;l>c;c++)if(i(s[c].key)===u)return!0;return!1},s.prototype.clear=function(){var e=this,t=e._buckets,n=a.prototype.clear.call(this);e._count=0;for(var r in t)t.hasOwnProperty(r)&&delete t[r];return e._entries.clear(),n},Object.defineProperty(s.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),s.prototype.getEnumerator=function(){var e,t=this;return new n.EnumeratorBase(function(){e=t._entries.first},function(t){if(null!=e){var n={key:e.key,value:e.value};return e=e.next,t.yieldReturn(n)}return t.yieldBreak()})},Object.defineProperty(s.prototype,"keys",{get:function(){var e=this,t=[];return e._entries.forEach(function(e){return t.push(e.key)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"values",{get:function(){var e=this,t=[];return e._entries.forEach(function(e){return t.push(e.value)}),t},enumerable:!0,configurable:!0}),s}(n.DictionaryAbstractBase);n.Dictionary=a}(n=e.Collections||(e.Collections={}))}(e||(e={}));var e;!function(e){var n;!function(n){"use strict";var r,o=function(){function e(){}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),e.prototype.yieldReturn=function(e){return this._current=e,!0},e.prototype.yieldBreak=function(){return this._current=null,!1},e}();!function(e){e[e.Before=0]="Before",e[e.Running=1]="Running",e[e.After=2]="After"}(r||(r={}));var i;!function(t){function n(t){if(t instanceof Array)return new s(t);if(typeof t===e.Types.Object&&"length"in t)return new a(function(){return{source:t,length:t.length,pointer:0,step:1}});if("getEnumerator"in t)return t.getEnumerator();throw new Error("Unknown enumerable.")}function r(e,t){if(e)for(var n=0;e.moveNext()&&t(e.current,n++)!==!1;);}t.from=n,t.forEach=r}(i=n.Enumerator||(n.Enumerator={}));var u=function(e){function n(t,n,r){e.call(this),this.initializer=t,this.tryGetNext=n,this.disposer=r,this.reset()}return t(n,e),Object.defineProperty(n.prototype,"current",{get:function(){return this._yielder.current},enumerable:!0,configurable:!0}),n.prototype.reset=function(){var e=this;e._yielder=new o,e._state=r.Before},n.prototype.moveNext=function(){var e=this;try{switch(e._state){case r.Before:e._state=r.Running;var t=e.initializer;t&&t();case r.Running:return e.tryGetNext(e._yielder)?!0:(this.dispose(),!1);case r.After:return!1}}catch(n){throw this.dispose(),n}},n.prototype._onDispose=function(){var e=this,t=e.disposer;e.initializer=null,e.disposer=null;var n=e._yielder;e._yielder=null,n&&n.yieldBreak();try{t&&t()}finally{this._state=r.After}},n}(e.DisposableBase);n.EnumeratorBase=u;var a=function(e){function n(t){var n;e.call(this,function(){if(n=t(),n&&n.source){if(n.length&&0===n.step)throw new Error("Invalid IndexEnumerator step value (0).");var e=n.pointer;if(e){if(e!=Math.floor(e))throw new Error("Invalid IndexEnumerator pointer value ("+e+") has decimal.")}else n.pointer=0;n.pointer=0|e;var r=n.step;if(r){if(r!=Math.floor(r))throw new Error("Invalid IndexEnumerator step value ("+r+") has decimal.")}else n.step=1;n.step=0|r}},function(e){var t=n&&n.source?n.length:0;if(!t)return e.yieldBreak();var r=0|n.pointer;return n.pointer+=n.step,t>r&&r>=0?e.yieldReturn(n.source[r]):e.yieldBreak()},function(){n&&(n.source=null)})}return t(n,e),n}(u);n.IndexEnumerator=a;var s=function(n){function r(t,r,o){void 0===r&&(r=0),void 0===o&&(o=1),n.call(this,function(){var n=e.Types.isFunction(t)?t():t;return{source:n,pointer:r,length:n?n.length:0,step:o}})}return t(r,n),r}(a);n.ArrayEnumerator=s}(n=e.Collections||(e.Collections={}))}(e||(e={}));var e;!function(e){var t;!function(t){var n;!function(n){function r(n,r){n&&e.using(n.getEnumerator(),function(e){t.Enumerator.forEach(e,r)})}n.forEach=r}(n=t.Enumerable||(t.Enumerable={}))}(t=e.Collections||(e.Collections={}))}(e||(e={}));var e;!function(e){var t;!function(e){function t(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)e=e.replace("{"+r+"}",t[r]);return e}e.format=t}(t=e.Text||(e.Text={}))}(e||(e={}));var e;!function(e){var t;!function(t){function n(e,t){if(!e)return null;var n=e.external;return n||(e.external=n=new s(t,e)),n}function r(e,t){if(!e)throw new Error("ArgumentNullException: 'node' cannot be null.");if(e.list!=t)throw new Error("InvalidOperationException: provided node does not belong to this list.");var n=e._node;if(!n)throw new Error("InvalidOperationException: provided node is not valid.");return n}var o=0,i=1,u=function(){function e(e,t,n){this.value=e,this.prev=t,this.next=n}return e.prototype.assertDetached=function(){if(this.next||this.prev)throw new Error("InvalidOperationException: adding a node that is already placed.")},e}(),a=function(){function a(e){var n=this,r=o,i=null,a=null,s=t.Enumerator.from(e);for(s.moveNext()&&(i=a=new u(s.current),++r);s.moveNext();)a=a.next=new u(s.current,a),++r;n._first=i,n._last=a,n._count=r}return a.prototype._addFirst=function(e){var t=this,n=t._first,r=new u(e,null,n);return n?(n.prev=r,n=r):t._first=t._last=r,t._count+=i,r},a.prototype._addLast=function(e){var t=this,n=t._last,r=new u(e,n);return n?(n.next=r,n=r):t._first=t._last=r,t._count+=i,r},a.prototype._addNodeBefore=function(e,t){t.assertDetached(),t.next=e,t.prev=e.prev,e.prev.next=t,e.prev=t,this._count+=i},a.prototype._addNodeAfter=function(e,t){t.assertDetached(),t.prev=e,t.next=e.next,e.next.prev=t,e.next=t,this._count+=i},a.prototype._findFirst=function(t){for(var n=e.areEqual,r=this._first;r;){if(n(t,r.value))return r;r=r.next}return null},a.prototype._findLast=function(t){for(var n=e.areEqual,r=this._last;r;){if(n(t,r.value))return r;r=r.prev}return null},a.prototype.forEach=function(e){for(var t=this._first,n=o;t&&e(t.value,n++)!==!1;)t=t.next},a.prototype.forEachFromClone=function(e){var n=this.toArray();
t.ArrayUtility.forEach(n,e),n.length=0},a.prototype.getEnumerator=function(){var e,n=this;return new t.EnumeratorBase(function(){e=new u(null,null,n._first)},function(t){return(e=e.next)?t.yieldReturn(e.value):t.yieldBreak()})},Object.defineProperty(a.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isReadOnly",{get:function(){return!1},enumerable:!0,configurable:!0}),a.prototype.add=function(e){this._addLast(e)},a.prototype.clear=function(){var e=this;e._first=null,e._last=null;var t=e._count;return e._count=0,t},a.prototype.contains=function(t){var n=!1,r=e.areEqual;return this.forEach(function(e){return!(n=r(t,e))}),n},a.prototype.copyTo=function(e,t){void 0===t&&(t=0),this.forEach(function(n,r){e[t+r]=n})},a.prototype.removeOnce=function(e){var t=this,n=t._findFirst(e);if(n){var r=n.prev,o=n.next;r?r.next=o:t._first=o,o?o.prev=r:t._last=r,t._count-=i}return null!=n},a.prototype.remove=function(e){for(var t=this,n=o;t.removeOnce(e);)++n;return n},a.prototype.toArray=function(){var e=t.ArrayUtility.initialize(this._count);return this.copyTo(e),e},Object.defineProperty(a.prototype,"first",{get:function(){return n(this._first,this)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"last",{get:function(){return n(this._last,this)},enumerable:!0,configurable:!0}),a.prototype._get=function(e){if(0>e)throw new Error("ArgumentOutOfRangeException: index is less than zero.");if(e>=this._count)throw new Error("ArgumentOutOfRangeException: index is greater than count.");for(var t=this._first,n=o;t&&e<n++;)t=t.next;return t},a.prototype.get=function(e){return this._get(e).value},a.prototype.getNode=function(e){return n(this._get(e),this)},a.prototype.find=function(e){return n(this._findFirst(e),this)},a.prototype.findLast=function(e){return n(this._findLast(e),this)},a.prototype.addFirst=function(e){this._addFirst(e)},a.prototype.addLast=function(e){this._addLast(e)},a.prototype.removeFirst=function(){var e=this,t=e._first;if(t){var n=t.next;e._first=n,n&&(n.prev=null),e._count-=i}},a.prototype.removeLast=function(){var e=this,t=e._last;if(t){var n=t.prev;e._last=n,n&&(n.next=null),e._count-=i}},a.prototype.removeNode=function(t){var n=this,o=r(t,n),i=o.prev,u=o.next,a=!1,s=!1;if(i?i.next=u:n._first==o?n._first=u:a=!0,u?u.prev=i:n._last==o?n._last=i:s=!0,a!==s)throw new Error(e.Text.format("Exception: provided node is has no {0} reference but is not the {1} node!",a?"previous":"next",a?"first":"last"));return!a&&!s},a.prototype.addBefore=function(e,t){this._addNodeBefore(r(e,this),new u(t))},a.prototype.addAfter=function(e,t){this._addNodeAfter(r(e,this),new u(t))},a.prototype.addNodeBefore=function(e,t){this._addNodeBefore(r(e,this),r(t,this))},a.prototype.addNodeAfter=function(e,t){this._addNodeAfter(r(e,this),r(t,this))},a}();t.LinkedList=a;var s=function(){function e(e,t){this._list=e,this._node=t}return Object.defineProperty(e.prototype,"list",{get:function(){return this._list},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previous",{get:function(){return n(this._node.prev,this._list)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return n(this._node.next,this._list)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._node.value},set:function(e){this._node.value=e},enumerable:!0,configurable:!0}),e.prototype.addBefore=function(e){this._list.addBefore(this,e)},e.prototype.addAfter=function(e){this._list.addAfter(this,e)},e.prototype.addNodeBefore=function(e){this._list.addNodeBefore(this,e)},e.prototype.addNodeAfter=function(e){this._list.addNodeAfter(this,e)},e.prototype.remove=function(){this._list.removeNode(this)},e}()}(t=e.Collections||(e.Collections={}))}(e||(e={}));var e;!function(e){var n;!function(n){var r=function(n){function r(){n.apply(this,arguments),this._count=0,this._map={}}return t(r,n),r.prototype.containsKey=function(e){return e in this._map},r.prototype.containsValue=function(t){var n=this._map,r=e.areEqual;for(var o in n)if(n.hasOwnProperty(o)&&r(n[o],t))return!0;return!1},r.prototype.get=function(e){return this._map[e]},r.prototype.set=function(e,t){var n=this,r=n._map,o=r[e];return o!==t?(void 0===t?e in r&&(delete r[e],--n._count):(e in r||++n._count,r[e]=t),n._onValueUpdate(e,t,o),!0):!1},r.prototype.importMap=function(e){var t=this;return t.handleUpdate(function(){var n=!1;for(var r in e)e.hasOwnProperty(r)&&t.set(r,e[r])&&(n=!0);return n})},r.prototype.toMap=function(e){var t=this,n={};for(var r in t._map)if(t._map.hasOwnProperty(r)){var o=t._map[r];e&&(o=e(r,o)),void 0!==o&&(n[r]=o)}return n},Object.defineProperty(r.prototype,"keys",{get:function(){var e=this,t=[];for(var n in e._map)e._map.hasOwnProperty(n)&&t.push(n);return t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"values",{get:function(){var e=this,t=[];for(var n in e._map)e._map.hasOwnProperty(n)&&t.push(e._map[n]);return t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),r}(n.DictionaryAbstractBase);n.StringKeyDictionary=r}(n=e.Collections||(e.Collections={}))}(e||(e={}));var e;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this._order=[]}return t(r,n),r.prototype.indexOfKey=function(e){return this._order.indexOf(e,0)},r.prototype.getValueByIndex=function(e){return this.get(this._order[e])},r.prototype.set=function(t,r,o){var i=this,u=-1!=i.indexOfKey(t);return u||void 0===r&&!o?u&&void 0===r&&!o&&e.ArrayUtility.remove(i._order,t):i._order.push(t),n.prototype.set.call(this,t,r)},r.prototype.setByIndex=function(e,t){var n=this,r=n._order;if(0>e||e>=r.length)throw new Error("IndexOutOfRange Exception.");return n.set(r[e],t)},r.prototype.importValues=function(e){var t=this;return t.handleUpdate(function(){for(var n=!1,r=0;r<e.length;r++)t.setByIndex(r,e[r])&&(n=!0);return n})},r.prototype.setValues=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.importValues(e)},r.prototype.removeByIndex=function(e){return this.setByIndex(e,void 0)},Object.defineProperty(r.prototype,"keys",{get:function(){var e=this;return e._order.filter(function(t){return e.containsKey(t)})},enumerable:!0,configurable:!0}),r}(e.StringKeyDictionary);e.OrderedStringKeyDictionary=n}(n=e.Collections||(e.Collections={}))}(e||(e={}));var e;!function(e){var t;!function(t){function n(e,t){if(e!=Math.floor(e))throw new Error("InvalidOperationException: "+t+" must be an interger.")}function r(e,t){if(0>e)throw new Error("ArgumentOutOfRangeException: "+t+" must be greater than zero")}function o(e,t){n(e,t),r(e,t)}var i=4,u=100,a=i,s=[],c=function(){function n(n){var r=this;r._head=0,r._tail=0,r._size=0,r._version=0,n?e.Types.isNumber(n)?(o(n,"source"),r._array=n?t.ArrayUtility.initialize(n):s):(r._array=t.ArrayUtility.initialize(n instanceof Array||"length"in n?n.length:a),t.Enumerable.forEach(n,function(e){return r.enqueue(e)}),r._version=0):r._array=s,r._capacity=r._array.length}return Object.defineProperty(n.prototype,"count",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isReadOnly",{get:function(){return!1},enumerable:!0,configurable:!0}),n.prototype.add=function(e){this.enqueue(e)},n.prototype.clear=function(){var e=this,n=e._array,r=e._head,o=e._tail,i=e._size;return o>r?t.ArrayUtility.clear(n,r,i):(t.ArrayUtility.clear(n,r,n.length-r),t.ArrayUtility.clear(n,0,o)),e._head=0,e._tail=0,e._size=0,e._version++,i},n.prototype.contains=function(t){for(var n=this,r=n._array,o=n._head,i=n._size,u=n._capacity;i-->0;){if(e.areEqual(r[o],t))return!0;o=(o+1)%u}return!1},n.prototype.copyTo=function(e,n){if(void 0===n&&(n=0),null==e)throw new Error("ArgumentNullException: array cannot be null.");o(n,"arrayIndex");var r=e.length,i=this,u=i._size,a=u>r-n?r-n:u;if(0!=a){var s=i._array,c=i._capacity,l=i._head,p=c-l,f=a>p?p:a;t.ArrayUtility.copyTo(s,e,l,n,f),a-=f,a>0&&t.ArrayUtility.copyTo(s,e,0,n+c-l,a)}},n.prototype.remove=function(){throw new Error("ICollection<T>.remove is not implemented in Queue<T> since it would require destroying the underlying array to remove the item.")},n.prototype.dispose=function(){var e=this;e.clear(),e._array!=s&&(e._array.length=e._capacity=0,e._array=s),e._version=0},n.prototype.toArray=function(){var e=this,n=e._size,r=t.ArrayUtility.initialize(n);return 0==n?r:(e.copyTo(r),r)},n.prototype.setCapacity=function(e){o(e,"capacity");var n=this,r=n._array,i=n._capacity;if(e!=i){var u=n._head,a=n._tail,c=n._size;if(r!=s&&e>i&&a>u)return r.length=n._capacity=e,void n._version++;var l=t.ArrayUtility.initialize(e);c>0&&(a>u?t.ArrayUtility.copyTo(r,l,u,0,c):(t.ArrayUtility.copyTo(r,l,u,0,i-u),t.ArrayUtility.copyTo(r,l,0,i-u,a))),n._array=l,n._capacity=e,n._head=0,n._tail=c==e?0:c,n._version++}},n.prototype.enqueue=function(e){var t=this,n=t._array,r=0|t._size,o=0|t._capacity;if(r==o){var a=o*u;o+i>a&&(a=o+i),t.setCapacity(a),n=t._array,o=t._capacity}var s=t._tail;n[s]=e,t._tail=(s+1)%o,t._size=r+1,t._version++},n.prototype.dequeue=function(){var e=this;if(0==e._size)throw new Error("InvalidOperationException: cannot dequeue an empty queue.");var t=e._array,n=e._head,r=e._array[n];return t[n]=null,e._head=(n+1)%e._capacity,e._size--,e._version++,r},n.prototype._getElement=function(e){o(e,"index");var t=this;return t._array[(t._head+e)%t._capacity]},n.prototype.peek=function(){if(0==this._size)throw new Error("InvalidOperatioException: cannot call peek on an empty queue.");return this._array[this._head]},n.prototype.trimExcess=function(){var e=this,t=e._size;t<Math.floor(.9*e._capacity)&&e.setCapacity(t)},n.prototype.getEnumerator=function(){var e,n,r=this;return new t.EnumeratorBase(function(){n=r._version,e=0},function(t){if(n!=r._version)throw new Error("InvalidOperationException: collection was changed during enumeration.");return e==r._size?t.yieldBreak():t.yieldReturn(r._getElement(e++))})},n}();t.Queue=c}(t=e.Collections||(e.Collections={}))}(e||(e={}));{var e;e.Collections.LinkedList}return!function(e){var t;!function(t){var n=e.Types,r=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=this;n._latest=null,n._partArray=[],n.appendThese(e)}return e.prototype.appendSingle=function(e){if(null!==e&&void 0!==e){var t=this;switch(t._latest=null,typeof e){case n.Object:case n.Function:e=e.toString()}t._partArray.push(e)}},e.prototype.appendThese=function(e){var t=this;return e.forEach(function(e){return t.appendSingle(e)}),t},e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.appendThese(e),this},e.prototype.appendLine=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.appendLines(e),this},e.prototype.appendLines=function(e){var t=this;return e.forEach(function(e){null!==e&&void 0!==e&&(t.appendSingle(e),t._partArray.push("\r\n"))}),t},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._partArray.length},enumerable:!0,configurable:!0}),e.prototype.toString=function(){var e=this._latest;return null===!e&&(this._latest=e=this._partArray.join()),e},e.prototype.join=function(e){return this._partArray.join(e)},e.prototype.clear=function(){this._partArray.length=0,this._latest=null},e.prototype.dispose=function(){this.clear()},e}();t.StringBuilder=r}(t=e.Text||(e.Text={}))}(e||(e={})),e};"function"==typeof define&&define.amd?define("System",e):"undefined"!=typeof module&&module.exports&&(module.exports=e)}(this);
//# sourceMappingURL=../amd/System.js.map